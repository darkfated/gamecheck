<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Game Quiz Widget</title>
    <style>
      :root {
        --bg-primary: #0f0f10;
        --text-primary: #fff;
        --text-secondary: #a1a1aa;
        --border-color: #27272a;
        --accent-primary: #6366f1;
        --accent-secondary: #818cf8;
      }
      html,
      body,
      #app {
        margin: 0;
        padding: 0;
        font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
          Roboto, sans-serif;
        background: var(--bg-primary);
        color: var(--text-primary);
        height: 100%;
        min-height: 0;
        width: 100%;
        overflow: hidden;
      }
      #app {
        display: flex;
        align-items: center;
        justify-content: center;
        height: 100%;
        width: 100%;
      }
      .quiz-box {
        background: var(--bg-primary);
        border-radius: 24px;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
        border: 1px solid var(--border-color);
        padding: 32px 24px;
        width: 100%;
        max-width: 420px;
        height: 100%;
        display: flex;
        flex-direction: column;
        gap: 28px;
        justify-content: center;
      }
      .question {
        font-size: 1.1rem;
        font-weight: 600;
        color: var(--text-primary);
        margin-bottom: 0.5em;
      }
      .options-list {
        display: flex;
        flex-direction: column;
        gap: 12px;
        margin: 0;
        padding: 0;
        list-style: none;
      }
      .option-item {
        background: var(--bg-primary);
        color: var(--text-primary);
        border: 1.5px solid var(--border-color);
        border-radius: 10px;
        padding: 14px 18px;
        font-size: 1rem;
        cursor: pointer;
        transition: border 0.15s, background 0.15s, color 0.15s;
        outline: none;
        user-select: none;
      }
      .option-item.selected {
        background: linear-gradient(
          90deg,
          var(--accent-primary),
          var(--accent-secondary)
        );
        color: #fff;
        border-color: var(--accent-secondary);
      }
      .option-item:active {
        filter: brightness(0.95);
      }
      .submit-btn {
        margin-top: 8px;
        background: linear-gradient(
          90deg,
          var(--accent-primary),
          var(--accent-secondary)
        );
        color: #fff;
        border: none;
        border-radius: 10px;
        padding: 14px 0;
        font-size: 1rem;
        font-weight: 600;
        cursor: pointer;
        transition: background 0.15s, box-shadow 0.15s;
        box-shadow: 0 2px 8px rgba(99, 102, 241, 0.08);
        width: 100%;
      }
      .submit-btn:disabled {
        background: var(--border-color);
        color: var(--text-secondary);
        cursor: not-allowed;
        box-shadow: none;
      }
      .result {
        text-align: center;
        color: var(--text-primary);
        font-size: 1.2rem;
        font-weight: 600;
        margin-top: 12px;
      }
    </style>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
  </head>
  <body>
    <div id="app"></div>
    <script>
      const { createApp, ref, computed } = Vue
      const GameQuizWidget = {
        setup() {
          const currentQuestionIndex = ref(0)
          const selectedOptionIndex = ref(null)
          const showResult = ref(false)
          const userAnswers = ref([])
          const questions = [
            {
              question:
                "В какой из игр основного персонажа сюжетной линии играл актёр Киану Ривз?",
              options: [
                "Death Stranding",
                "Cyberpunk 2077",
                "Grand Theft Auto V",
                "The Last of Us Part II",
              ],
              correctAnswer: 1,
            },
            {
              question:
                "Какая игра получила титул «Игра года» на The Game Awards 2020?",
              options: [
                "Ghost of Tsushima",
                "The Last of Us Part II",
                "DOOM Eternal",
                "Hades",
              ],
              correctAnswer: 1,
            },
            {
              question:
                "В какой игровой вселенной присутствует организация Black Mesa?",
              options: [
                "Half-Life",
                "Resident Evil",
                "Metal Gear Solid",
                "BioShock",
              ],
              correctAnswer: 0,
            },
            {
              question: "Какая компания разработала игру Minecraft?",
              options: [
                "Electronic Arts",
                "Valve",
                "Mojang Studios",
                "Blizzard Entertainment",
              ],
              correctAnswer: 2,
            },
            {
              question:
                "Какая игра из серии The Elder Scrolls вышла в 2011 году?",
              options: [
                "The Elder Scrolls III: Morrowind",
                "The Elder Scrolls IV: Oblivion",
                "The Elder Scrolls V: Skyrim",
                "The Elder Scrolls Online",
              ],
              correctAnswer: 2,
            },
            {
              question:
                "Как зовут главного героя серии игр The Legend of Zelda?",
              options: ["Зельда", "Линк", "Ганон", "Марио"],
              correctAnswer: 1,
            },
            {
              question: "В какой игре впервые появился персонаж Соник?",
              options: [
                "Sonic the Hedgehog",
                "Sonic Adventure",
                "Sonic Heroes",
                "Sonic Mania",
              ],
              correctAnswer: 0,
            },
            {
              question: "Какой жанр у игры Dark Souls?",
              options: ["RPG", "Шутер", "Головоломка", "Гонки"],
              correctAnswer: 0,
            },
            {
              question:
                "В какой игре можно встретить персонажа Геральта из Ривии?",
              options: [
                "Dragon Age",
                "The Witcher",
                "Skyrim",
                "Divinity: Original Sin",
              ],
              correctAnswer: 1,
            },
            {
              question: "Какой предмет нужен для победы в игре Portal?",
              options: [
                "Куб-компаньон",
                "Портальная пушка",
                "Ключ-карта",
                "Золотая монета",
              ],
              correctAnswer: 1,
            },
          ]
          const currentQuestion = computed(
            () => questions[currentQuestionIndex.value]
          )
          const isLast = computed(
            () => currentQuestionIndex.value === questions.length - 1
          )
          const score = computed(
            () =>
              userAnswers.value.filter(
                (a, i) => a === questions[i].correctAnswer
              ).length
          )
          function selectOption(idx) {
            selectedOptionIndex.value = idx
          }
          function submit() {
            userAnswers.value.push(selectedOptionIndex.value)
            if (isLast.value) {
              showResult.value = true
            } else {
              currentQuestionIndex.value++
              selectedOptionIndex.value = null
            }
          }
          function reset() {
            currentQuestionIndex.value = 0
            selectedOptionIndex.value = null
            showResult.value = false
            userAnswers.value = []
          }
          return {
            currentQuestion,
            selectedOptionIndex,
            selectOption,
            submit,
            showResult,
            score,
            questions,
            reset,
            isLast,
          }
        },
        template: `
          <div class='quiz-box'>
            <template v-if='!showResult'>
              <div class='question'>{{ currentQuestion.question }}</div>
              <ul class='options-list'>
                <li v-for='(option, idx) in currentQuestion.options' :key='idx'
                    :class='["option-item", {selected: selectedOptionIndex === idx}]'
                    @click='selectOption(idx)'>
                  {{ option }}
                </li>
              </ul>
              <button class='submit-btn' :disabled='selectedOptionIndex === null' @click='submit'>
                Ответить
              </button>
            </template>
            <template v-else>
              <div class='result'>
                Ваш результат: {{ score }} из {{ questions.length }}<br>
                <button class='submit-btn' @click='reset'>Пройти снова</button>
              </div>
            </template>
          </div>
        `,
      }
      createApp(GameQuizWidget).mount("#app")
    </script>
  </body>
</html>
